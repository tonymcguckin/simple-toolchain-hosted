version: '2'

messages:
  $i18n: locales.yml

template:
  name:
    $ref: "$env.byoc_name === undefined ? '#/messages/template.name' : '#/messages/template.byoc_name'"

  description:
    $ref: "#/messages/template.description"

toolchain:
  name: "foo"

template:
  getting_started:
      $ref: "#/messages/template.description"
  info:
    git url: >-
      $env.repository ? '[' + $env.repository + '](' + $env.repository + ')' : "[https://github.com/tonymcguckin/simple-toolchain-hosted](https://github.com/tonymcguckin/simple-toolchain-hosted)"
    git branch: >-
      $env.repository && $env.branch ? '[' + $env.branch + ']('+ $env.repository + '/tree/' + $env.branch + ')': "[flavour3](https://github.com/tonymcguckin/simple-toolchain-hosted/tree/flavour3)"

services:
  repo:
    $switch:
      - $expr: default
      - $default: default
        service_id: orion
        parameters:
          test: test

form:
  pipeline:
    parameters:
      env_id: $env.env_id
    schema:
      $ref: deploy.json
